#!/bin/bash

#
# This is a simple bash script to run the Trident class with some
# arguments so that we can exercise it from the command line.
#

#
# In order to handle the some fo the networking code in Java, we
# need to have `ifconfig` in the PATH, but it's not typically in
# the default crontab PATH, so let's add it's location into the
# mix so we can be assured of picking it up properly.
#
export PATH="/usr/local/bin:/usr/local/sbin:/usr/sbin:/sbin:$HOME/bin:$PATH"
#
# In order to make sure that all the code has reasonable default
# encodings, we need to make sure that we specify the default language
# here. This is no big deal for login shells, but it's a major issue
# for cronjobs - where there is no default.
#
export LANG="en_US.UTF-8"

#
# Jump right in...
#
program=`basename $0`
dir=`dirname $0`
#
# Get the name of the ACTUAL jar file that we'll be running. This is a
# simple symlink, so we just need to "look through the link".
#
jar=`readlink -f /home/newsroom/newsroom-current.jar`
gc_opts="-XX:+UseConcMarkSweepGC"
# build up the complete classpath for a storm topology OUTSIDE of storm
cp="$jar"
java -Xmx1g $gc_opts -cp $cp newsroom.main "$@"
